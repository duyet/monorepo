@import "tailwindcss";

@plugin "@tailwindcss/typography";

@layer base {
  :root {
    --background: hsl(0, 0%, 100%);
    --foreground: hsl(240, 10%, 3.9%);
    --card: hsl(0, 0%, 100%);
    --card-foreground: hsl(240, 10%, 3.9%);
    --popover: hsl(0, 0%, 100%);
    --popover-foreground: hsl(240, 10%, 3.9%);
    --primary: hsl(240, 5.9%, 10%);
    --primary-foreground: hsl(0, 0%, 98%);
    --secondary: hsl(240, 4.8%, 95.9%);
    --secondary-foreground: hsl(240, 5.9%, 10%);
    --muted: hsl(240, 4.8%, 95.9%);
    --muted-foreground: hsl(240, 3.8%, 46.1%);
    --accent: hsl(240, 4.8%, 95.9%);
    --accent-foreground: hsl(240, 5.9%, 10%);
    --destructive: hsl(0, 84.2%, 60.2%);
    --destructive-foreground: hsl(0, 0%, 98%);
    --border: hsl(240, 5.9%, 90%);
    --input: hsl(240, 5.9%, 90%);
    --ring: hsl(240, 5.9%, 10%);
    --radius: 0.5rem;
    --chart-1: hsl(12, 76%, 61%);
    --chart-2: hsl(173, 58%, 39%);
    --chart-3: hsl(197, 37%, 24%);
    --chart-4: hsl(43, 74%, 66%);
    --chart-5: hsl(27, 87%, 67%);
  }

  .dark {
    --background: hsl(240, 10%, 3.9%);
    --foreground: hsl(0, 0%, 98%);
    --card: hsl(240, 10%, 3.9%);
    --card-foreground: hsl(0, 0%, 98%);
    --popover: hsl(240, 10%, 3.9%);
    --popover-foreground: hsl(0, 0%, 98%);
    --primary: hsl(0, 0%, 98%);
    --primary-foreground: hsl(240, 5.9%, 10%);
    --secondary: hsl(240, 3.7%, 15.9%);
    --secondary-foreground: hsl(0, 0%, 98%);
    --muted: hsl(240, 3.7%, 15.9%);
    --muted-foreground: hsl(240, 5%, 64.9%);
    --accent: hsl(240, 3.7%, 15.9%);
    --accent-foreground: hsl(0, 0%, 98%);
    --destructive: hsl(0, 62.8%, 30.6%);
    --destructive-foreground: hsl(0, 0%, 98%);
    --border: hsl(240, 3.7%, 15.9%);
    --input: hsl(240, 3.7%, 15.9%);
    --ring: hsl(240, 4.9%, 83.9%);
    --chart-1: hsl(220, 70%, 50%);
    --chart-2: hsl(160, 60%, 45%);
    --chart-3: hsl(30, 80%, 55%);
    --chart-4: hsl(280, 65%, 60%);
    --chart-5: hsl(340, 75%, 55%);
  }

  *,
  ::after,
  ::before,
  ::backdrop,
  ::file-selector-button {
    border-color: var(--border);
  }
}

/* Chat-specific styles */
@layer components {
  /* Enhanced prose typography for better reading experience */
  .prose {
    --tw-prose-body: theme("colors.gray.700");
    --tw-prose-headings: theme("colors.gray.900");
    --tw-prose-links: theme("colors.blue.600");
    --tw-prose-links-hover: theme("colors.blue.700");
    --tw-prose-bold: theme("colors.gray.900");
    --tw-prose-counters: theme("colors.gray.500");
    --tw-prose-bullets: theme("colors.gray.300");
    --tw-prose-hr: theme("colors.gray.200");
    --tw-prose-quotes: theme("colors.gray.900");
    --tw-prose-quote-borders: theme("colors.gray.200");
    --tw-prose-code: theme("colors.gray.900");
    --tw-prose-pre-code: theme("colors.gray.200");
    --tw-prose-pre-bg: theme("colors.gray.900");
    --tw-prose-th-borders: theme("colors.gray.200");
    --tw-prose-td-borders: theme("colors.gray.200");

    /* Improved readability */
    font-size: 1.0625rem; /* Slightly larger base font */
    line-height: 1.75; /* More comfortable line height */
    letter-spacing: -0.003em; /* Subtle letter spacing */
  }

  /* Dark mode prose overrides */
  .dark .prose {
    --tw-prose-body: theme("colors.gray.300");
    --tw-prose-headings: theme("colors.white");
    --tw-prose-links: theme("colors.blue.400");
    --tw-prose-links-hover: theme("colors.blue.300");
    --tw-prose-bold: theme("colors.white");
    --tw-prose-counters: theme("colors.gray.400");
    --tw-prose-bullets: theme("colors.gray.600");
    --tw-prose-hr: theme("colors.gray.700");
    --tw-prose-quotes: theme("colors.gray.100");
    --tw-prose-quote-borders: theme("colors.gray.700");
    --tw-prose-code: theme("colors.gray.100");
    --tw-prose-pre-code: theme("colors.gray.300");
    --tw-prose-pre-bg: theme("colors.gray.800");
    --tw-prose-th-borders: theme("colors.gray.700");
    --tw-prose-td-borders: theme("colors.gray.700");
  }

  /* Enhanced heading styles with anchor links */
  .prose h2,
  .prose h3,
  .prose h4 {
    scroll-margin-top: 6rem; /* Offset for fixed headers */
  }

  /* Enhanced link styles */
  .prose a {
    text-decoration: underline;
    text-underline-offset: 2px;
    transition: color 0.2s ease;
  }

  .prose a:hover {
    text-decoration-thickness: 2px;
  }

  /* Enhanced list readability */
  .prose ul > li,
  .prose ol > li {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }

  .prose ul > li::marker {
    color: theme("colors.gray.400");
  }

  .dark .prose ul > li::marker {
    color: theme("colors.gray.600");
  }

  /* Enhanced blockquote styling */
  .prose blockquote {
    border-left-width: 4px;
    border-left-color: theme("colors.gray.300");
    font-style: italic;
    padding-left: 1.5em;
  }

  .dark .prose blockquote {
    border-left-color: theme("colors.gray.700");
  }

  /* Enhanced code blocks */
  .prose code {
    font-weight: 500;
    font-size: 0.875em;
  }

  .prose pre {
    border-radius: theme("borderRadius.xl");
    box-shadow: theme("boxShadow.sm");
  }

  /* Enhanced table styling */
  .prose thead {
    border-bottom-width: 2px;
  }

  .prose th {
    font-weight: 600;
    text-align: left;
  }

  /* Improved paragraph spacing */
  .prose p {
    margin-top: 1.5em;
    margin-bottom: 1.5em;
  }

  /* Smoother heading transitions */
  .prose h1,
  .prose h2,
  .prose h3,
  .prose h4 {
    margin-top: 2em;
    margin-bottom: 1em;
  }

  /* Message bubbles */
  /* Message bubbles */
  .message-user {
    @apply bg-blue-600 text-white rounded-2xl rounded-br-sm px-4 py-3 max-w-[80%];
  }

  .message-assistant {
    @apply bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-gray-100 rounded-2xl rounded-bl-sm px-4 py-3 max-w-[80%];
  }

  /* Chat input */
  .chat-input {
    @apply w-full px-4 py-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none;
  }

  /* Typing indicator animation */
  .typing-dot {
    @apply w-2 h-2 bg-gray-400 rounded-full animate-bounce;
  }

  .typing-dot:nth-child(2) {
    animation-delay: 0.1s;
  }

  .typing-dot:nth-child(3) {
    animation-delay: 0.2s;
  }
}
